<div class="panel-heading">
  <h1 class="panel-title">
    <%= Gesmew.t(:promotion_actions) %>
  </h1>
</div>
<div id="action_fields" class="panel-body">
  <%= form_tag gesmew.admin_promotion_promotion_actions_path(@promotion), :remote => true, :id => 'new_promotion_action_form' do %>
    <% options = options_for_select(  Rails.application.config.gesmew.promotions.actions.map(&:name).map {|name| [ Gesmew.t("promotion_action_types.#{name.demodulize.underscore}.name"), name] } ) %>

    <div class="form-group">
      <%= label_tag :action_type, Gesmew.t(:add_action_of_type)%>
      <%= select_tag 'action_type', options, :class => 'select2' %>
    </div>
    <div class="form-actions">
      <%= button Gesmew.t(:add), 'plus', 'submit', class: "btn-success" %>
    </div>

  <% end %>

  <%= form_for @promotion, :url => gesmew.admin_promotion_path(@promotion), :method => :put do |f| %>
    <div id="actions" class="filter_list margint">
      <% if @promotion.actions.any? %>
        <%= render :partial => 'promotion_action',  :collection => @promotion.actions %>
      <% else %>
        <div class="alert alert-warning">
          <%= Gesmew.t(:no_actions_added) %>
        </div>
      <% end %>
    </div>
    <div class="actions promotion-update">
      <%= button Gesmew.t('actions.update'), 'save' %>
    </div>
  <% end %>

</div>
